<script src="game-requirements/js/player_moves.js"></script>
<div class="container" ng-controller="player_moves">
	<div class="row">
	   	<h1>Available actions</h1>			
		<table class="table table-striped table-condensed table-hover">
			<thead>
				<tr>
					<th class="name">Criteria&nbsp;</th>							
					<th class="name">First Requirement&nbsp;</th>
					<th class="name">Select your vote&nbsp;</th>
					<th class="name">Second Requirement&nbsp;</th>
					<th class="name">Vote&nbsp;</th>
					<th class="name">Info&nbsp;</th>														
				</tr>
			</thead>
	
			<tbody>
				<tr	ng-repeat="playerMove in open_moves | limitTo:5:pagination.open.currentPage*pagination.open.itemsPerPage">
					<td>{{playerMove.requirementsMatrixData.criteria.name}}</td>								
					<td>{{playerMove.requirementsMatrixData.rowRequirement.name}}</td>
					<td>
						<div align="center">
							<label class="radio-inline" ng-repeat="requirementsChoice in requirementsChoices">
						      <input title="{{requirementsChoice.description}}" type="radio" ng-click="setVote(requirementsChoice.value, playerMove.playerMoveId)" ng-value="{{requirementsChoice.value}}" name="{{playerMove.playerMoveId}}">{{requirementsChoice.value}}
						    </label>
					    </div>
					</td>
					<td>{{playerMove.requirementsMatrixData.columnRequirement.name}}</td>
					<td>
						<div align="center">
							<a href="#/game-requirements/vote_view?playerMoveId={{playerMove.playerMoveId}}" class="btn btn-lg btn-success" role="button">Vote</a>
						</div>
					</td>
					<td>
						<div align="center">
							<button type="button" class="btn btn-warning btn-lg" data-toggle="modal" data-target="#{{playerMove.playerMoveId}}">
							  Info
							</button>
						</div>								
					</td>						
				</tr>
			</tbody>
			
			<tfoot>
				<tr>
					<td colspan="6">
						<div class="paging_simple_numbers" align="center">
							<ul class="pagination">
								<li class="paginate_button previous" ng-class="{disabled: pagination.open.currentPage == 0}"><a href
									ng-click="prevPage(pagination.open)">Prev</a></li>
				
								<li class="paginate_button" ng-repeat="n in range(pagination.open)" ng-class="{active: n == (pagination.open.currentPage + 1)}" ng-click="setPage(pagination.open)">
									<a href ng-bind="n">1</a>
								</li>
				
								<li class="paginate_button next" ng-class="{disabled: (pagination.open.currentPage) == pagination.open.totalPages - 1}">
									<a href ng-click="nextPage(pagination.open)">Next</a>
								</li>
							</ul>
						</div>
					</td>
				</tr>
			</tfoot>
		</table>	
	</div>
	<div class="row">
	   	<h1>Finished actions</h1>			
		<table class="table table-striped table-condensed table-hover">
			<thead>
				<tr>
					<th class="name">Criteria&nbsp;</th>							
					<th class="name">First Requirement&nbsp;</th>
					<th class="name">Second Requirement&nbsp;</th>
					<th class="name">Vote&nbsp;</th>												
				</tr>
			</thead>
	
			<tbody>
				<tr	ng-repeat="playerMove in closed_moves | limitTo:5:pagination.closed.currentPage*pagination.closed.itemsPerPage">
					<td>{{playerMove.requirementsMatrixData.criteria.name}}</td>								
					<td>{{playerMove.requirementsMatrixData.rowRequirement.name}}</td>
					<td>{{playerMove.requirementsMatrixData.columnRequirement.name}}</td>
					<td ng-if="playerMove.value != null">{{playerMove.value}}</td>
					<td ng-if="playerMove.value == null">not voted</td>
				</tr>
			</tbody>
			
			<tfoot>
				<tr>
					<td colspan="3">
						<div class="paging_simple_numbers" align="center">
							<ul class="pagination">
								<li class="paginate_button previous" ng-class="{disabled: pagination.closed.currentPage == 0}">
								<a href	ng-click="prevPage(pagination.closed)">Prev</a></li>
		
								<li class="paginate_button" ng-repeat="n in range(pagination.closed)" ng-class="{active: n == (pagination.closed.currentPage + 1)}" ng-click="setPage(pagination.closed)">
									<a href ng-bind="n">1</a>
								</li>
		
								<li class="paginate_button next" ng-class="{disabled: (pagination.closed.currentPage) == pagination.closed.totalPages - 1}">
									<a href ng-click="nextPage(pagination.closed)">Next</a>
								</li>
							</ul>
						</div>
					</td>
				</tr>
			</tfoot>
			
		</table>	
	</div>
		
		
	<!-- START Modal -->
	<div ng-repeat="playerMove in playerMoves" class="modal fade" id="{{playerMove.playerMoveId}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
		<div class="modal-dialog modal-lg" role="document">
			<div class="modal-content">
		    	<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
					<h4 class="modal-title" id="myModalLabel">Info about the move</h4>
				</div>
				<div class="modal-body">
					<div class="row">
						<div class="col-md-12">
							<div>
								<b>First requirement:</b> {{playerMove.requirementsMatrixData.rowRequirement.name}}
							</div>
							<b>Description:</b> {{playerMove.requirementsMatrixData.rowRequirement.description}}
						</div>	
					</div>
					<div class="row">
						<div class="col-md-12">
							<div>
								<b>Second requirement:</b> {{playerMove.requirementsMatrixData.columnRequirement.name}}
							</div>
							<b>Description:</b> {{playerMove.requirementsMatrixData.columnRequirement.description}}
						</div>
					</div>		        
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
				</div>
			</div>
		</div>
	</div>
<!-- END Modal -->  				  	
</div>  